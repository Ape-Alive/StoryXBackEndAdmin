{
  "openapi": "3.0.1",
  "info": {
    "title": "默认模块",
    "description": "",
    "version": "1.0.0"
  },
  "tags": [
    {
      "name": "套餐管理"
    }
  ],
  "paths": {
    "/api/packages": {
      "get": {
        "summary": "获取套餐列表",
        "deprecated": false,
        "description": "",
        "tags": [
          "套餐管理"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "name",
            "in": "query",
            "description": "套餐名称搜索",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "in": "query",
            "description": "套餐类型",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "free",
                "paid",
                "trial"
              ]
            }
          },
          {
            "name": "isActive",
            "in": "query",
            "description": "是否启用",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "post": {
        "summary": "创建套餐",
        "deprecated": false,
        "description": "",
        "tags": [
          "套餐管理"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "displayName",
                  "type"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "套餐内部标识（唯一）",
                    "example": "premium_monthly"
                  },
                  "displayName": {
                    "type": "string",
                    "description": "套餐显示名称",
                    "example": "高级套餐（月付）"
                  },
                  "description": {
                    "type": "string",
                    "description": "套餐描述",
                    "example": "包含10000积分，支持所有模型"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "free",
                      "paid",
                      "trial"
                    ],
                    "description": "套餐类型",
                    "example": "paid"
                  },
                  "duration": {
                    "type": "integer",
                    "description": "有效期（天），null表示永久",
                    "example": 30
                  },
                  "quota": {
                    "type": "number",
                    "format": "decimal",
                    "description": "额度（积分），null表示无限",
                    "example": 10000
                  },
                  "price": {
                    "type": "number",
                    "format": "decimal",
                    "description": "套餐金额（付费套餐必填）",
                    "example": 99
                  },
                  "priceUnit": {
                    "type": "string",
                    "enum": [
                      "CNY",
                      "USD"
                    ],
                    "description": "套餐金额单位",
                    "example": "CNY"
                  },
                  "discount": {
                    "type": "number",
                    "format": "decimal",
                    "description": "套餐折扣（百分比，0-100）",
                    "example": 10
                  },
                  "maxDevices": {
                    "type": "integer",
                    "description": "最大设备数量，null表示无限",
                    "example": 5
                  },
                  "availableModels": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "可用模型ID列表，null或空数组表示所有模型都可用",
                    "example": [
                      "model1",
                      "model2"
                    ]
                  },
                  "isStackable": {
                    "type": "boolean",
                    "default": false,
                    "description": "是否可叠加",
                    "example": false
                  },
                  "priority": {
                    "type": "integer",
                    "default": 0,
                    "description": "优先级，数字越大优先级越高",
                    "example": 10
                  },
                  "isActive": {
                    "type": "boolean",
                    "default": true,
                    "description": "是否启用",
                    "example": true
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "创建成功",
            "headers": {}
          },
          "400": {
            "description": "请求参数错误",
            "headers": {}
          },
          "409": {
            "description": "套餐名称已存在",
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/packages/{id}": {
      "get": {
        "summary": "获取套餐详情",
        "deprecated": false,
        "description": "",
        "tags": [
          "套餐管理"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "套餐ID",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "headers": {}
          },
          "404": {
            "description": "套餐不存在",
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "put": {
        "summary": "更新套餐",
        "deprecated": false,
        "description": "",
        "tags": [
          "套餐管理"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "套餐ID",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "description": "套餐显示名称"
                  },
                  "description": {
                    "type": "string",
                    "description": "套餐描述"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "free",
                      "paid",
                      "trial"
                    ],
                    "description": "套餐类型"
                  },
                  "duration": {
                    "type": "integer",
                    "description": "有效期（天），null表示永久"
                  },
                  "quota": {
                    "type": "number",
                    "format": "decimal",
                    "description": "额度（积分），null表示无限"
                  },
                  "price": {
                    "type": "number",
                    "format": "decimal",
                    "description": "套餐金额"
                  },
                  "priceUnit": {
                    "type": "string",
                    "enum": [
                      "CNY",
                      "USD"
                    ],
                    "description": "套餐金额单位"
                  },
                  "discount": {
                    "type": "number",
                    "format": "decimal",
                    "description": "套餐折扣（百分比，0-100）"
                  },
                  "maxDevices": {
                    "type": "integer",
                    "description": "最大设备数量，null表示无限"
                  },
                  "availableModels": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "可用模型ID列表，null或空数组表示所有模型都可用"
                  },
                  "isStackable": {
                    "type": "boolean",
                    "description": "是否可叠加"
                  },
                  "priority": {
                    "type": "integer",
                    "description": "优先级"
                  },
                  "isActive": {
                    "type": "boolean",
                    "description": "是否启用"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "headers": {}
          },
          "400": {
            "description": "请求参数错误",
            "headers": {}
          },
          "404": {
            "description": "套餐不存在",
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "delete": {
        "summary": "删除套餐",
        "deprecated": false,
        "description": "",
        "tags": [
          "套餐管理"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "套餐ID",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "headers": {}
          },
          "404": {
            "description": "套餐不存在",
            "headers": {}
          },
          "409": {
            "description": "套餐正在使用中，无法删除",
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/packages/{id}/duplicate": {
      "post": {
        "summary": "复制套餐",
        "deprecated": false,
        "description": "",
        "tags": [
          "套餐管理"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "套餐ID",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "newName",
                  "newDisplayName"
                ],
                "properties": {
                  "newName": {
                    "type": "string",
                    "description": "新套餐的内部标识（唯一）",
                    "example": "premium_monthly_v2"
                  },
                  "newDisplayName": {
                    "type": "string",
                    "description": "新套餐的显示名称",
                    "example": "高级套餐（月付）V2"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "复制成功",
            "headers": {}
          },
          "400": {
            "description": "请求参数错误",
            "headers": {}
          },
          "404": {
            "description": "套餐不存在",
            "headers": {}
          },
          "409": {
            "description": "新套餐名称已存在",
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/packages/{id}/status": {
      "patch": {
        "summary": "更新套餐状态",
        "deprecated": false,
        "description": "",
        "tags": [
          "套餐管理"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "套餐ID",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "isActive"
                ],
                "properties": {
                  "isActive": {
                    "type": "boolean",
                    "description": "是否启用",
                    "example": true
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "headers": {}
          },
          "404": {
            "description": "套餐不存在",
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/packages/batch/status": {
      "patch": {
        "summary": "批量更新套餐状态",
        "deprecated": false,
        "description": "",
        "tags": [
          "套餐管理"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "ids",
                  "isActive"
                ],
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "套餐ID数组",
                    "example": [
                      "id1",
                      "id2"
                    ]
                  },
                  "isActive": {
                    "type": "boolean",
                    "description": "是否启用",
                    "example": true
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/packages/batch": {
      "delete": {
        "summary": "批量删除套餐",
        "deprecated": false,
        "description": "",
        "tags": [
          "套餐管理"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "ids"
                ],
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "套餐ID数组",
                    "example": [
                      "id1",
                      "id2"
                    ]
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "删除成功",
            "headers": {}
          },
          "409": {
            "description": "部分套餐正在使用中，无法删除",
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {},
    "responses": {},
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "输入 JWT Token，格式：Bearer {token}"
      }
    }
  },
  "servers": [],
  "security": []
}